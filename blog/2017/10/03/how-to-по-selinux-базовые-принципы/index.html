<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    <title>How-to по SELinux, базовые принципы - The great nothingness</title>
    <meta charset="utf-8" />
    <meta name="author" content="Evgenii Lepikhin" />
    <meta name="description" content="Основы SELinux и работы с ним" />
    <meta name="keywords" content="SELinux, безопасность, linux, администрирование" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">The great nothingness</a></h1>
        <p>.</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/mountaineering/">Mountaineering</a></li>
          <li><a href="/tech/">Tech</a></li>
          <li><a href="/tags/">Тэги</a></li>
          <li><a href="/about/">О блоге</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="//www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Искать">
          <input type="hidden" name="as_sitesearch" value="johnlepikhin.github.io">
        </form>
        <img class="avatar" src="https://avatars0.githubusercontent.com/u/381986?v=4&amp;s=80" />
      </header>
    </div>

<div>
<div class="post">
<h1>How-to по SELinux, базовые принципы</h1>
<p>
По ра&shy;бо&shy;те раз&shy;би&shy;рал&shy;ся с SELinux под CentOS, на&shy;пи&shy;сал для се&shy;бя
до&shy;ку&shy;мен&shy;та&shy;цию. Решил по&shy;де&shy;лить&shy;ся.
</p>

<div id="outline-container-orgbbf030e" class="outline-2">
<h2 id="orgbbf030e">Подго&shy;то&shy;вка</h2>
<div class="outline-text-2" id="text-orgbbf030e">
</div>
<div id="outline-container-org42f2fb5" class="outline-3">
<h3 id="org42f2fb5">Поста&shy;вить па&shy;ке&shy;ты (CentOS)</h3>
<div class="outline-text-3" id="text-org42f2fb5">
<div class="org-src-container">
<pre><code class="src src-sh">yum install setools-console policycoreutils-python
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0b399c3" class="outline-2">
<h2 id="org0b399c3">Конц&shy;епт</h2>
<div class="outline-text-2" id="text-org0b399c3">
</div>
<div id="outline-container-orgc614190" class="outline-3">
<h3 id="orgc614190">Поли&shy;ти&shy;ки</h3>
<div class="outline-text-3" id="text-orgc614190">
<p>
Для вс&shy;ей си&shy;сте&shy;мы за&shy;да&shy;ет&shy;ся <a id="orgea66266"></a>policy, ко&shy;то&shy;рая бу&shy;дет при&shy;ме&shy;не&shy;на ко всем
об&shy;ъек&shy;там. По умо&shy;лча&shy;нию дейст&shy;ву&shy;ет по&shy;ли&shy;ти&shy;ка targeted. Поли&shy;ти&shy;ка за&shy;да&shy;ет&shy;ся
в фа&shy;йле <code>/etc/sysconfig/selinux</code>
</p>

<p>
Крат&shy;ко:
</p>
<ul class="org-ul">
<li><code>targeted</code>: всем всё раз&shy;ре&shy;ше&shy;но, за ис&shy;клю&shy;че&shy;ни&shy;ем про&shy;цес&shy;сов, для ко&shy;то&shy;рых
пра&shy;ви&shy;ла яв&shy;но за&shy;да&shy;ны (в CentOS их до&shy;воль&shy;но мно&shy;го, в ос&shy;нов&shy;ном се&shy;те&shy;вые
де&shy;мо&shy;ны)</li>
<li><code>strict</code>: то же что и targeted, толь&shy;ко до&shy;ступ ог&shy;ра&shy;ни&shy;чен и не толь&shy;ко
се&shy;те&shy;вым про&shy;цес&shy;сам</li>
<li><code>minimum</code> (в CentOS ста&shy;вит&shy;ся от&shy;дель&shy;но, па&shy;ке&shy;том
<code>selinux-policy-minimum</code>): targeted, толь&shy;ко по умо&shy;лча&shy;нию со&shy;всем нет
ни&shy;ка&shy;ких пра&shy;вил</li>
<li><code>MLS</code>: ?</li>
</ul>
</div>
</div>

<div id="outline-container-org7878ccd" class="outline-3">
<h3 id="org7878ccd">Режи&shy;мы SELinux</h3>
<div class="outline-text-3" id="text-org7878ccd">
<ul class="org-ul">
<li>disabled: SELinux вы&shy;клю&shy;чен</li>
<li><a id="org5997762"></a> <code>enforcing</code>: вклю&shy;чен, пра&shy;ви&shy;ла бло&shy;ки&shy;ру&shy;ют, со&shy;об&shy;ще&shy;ния о бло&shy;ки&shy;ров&shy;ке
ухо&shy;дят в <code>/var/log/audit/audit.log</code></li>
<li><a id="org1d188ee"></a> <code>permissive</code>: ни&shy;че&shy;го не бло&shy;ки&shy;ру&shy;ет&shy;ся, толь&shy;ко ухо&shy;дят со&shy;об&shy;ще&shy;ния в
<code>/var/log/audit/audit.log</code></li>
</ul>

<p>
Пере&shy;клю&shy;чить&shy;ся в permissive:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">setenforce 0
</code></pre>
</div>

<p>
Пере&shy;клю&shy;чить&shy;ся в enforcing:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">setenforce 1
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org32733f9" class="outline-3">
<h3 id="org32733f9">Кон&shy;тек&shy;сты</h3>
<div class="outline-text-3" id="text-org32733f9">
<p>
Каж&shy;дый об&shy;ъект ми&shy;ра (файл, про&shy;цесс и т.д.) име&shy;ют свойст&shy;во <a id="org2fa8036"></a>context. В
SELinux со&shy;вер&shy;шен&shy;но не важ&shy;но кто и ку&shy;да сде&shy;лал su, fork и т.д.&nbsp;&ndash;
кон&shy;текст на&shy;следу&shy;ет&shy;ся до тех пор, по&shy;ка яв&shy;но в пра&shy;ви&shy;лах SELinux не
ска&shy;за&shy;но, что на&shy;до сме&shy;нить кон&shy;текст
</p>

<p>
Каж&shy;дый кон&shy;текст со&shy;сто&shy;ит из трех час&shy;тей:
</p>
<ol class="org-ol">
<li><a id="orgc7d5302"></a> <code>user</code></li>
<li><a id="orgcb61176"></a> <code>role</code></li>
<li><a id="org3bd1d38"></a> <code>type</code> (у про&shy;цес&shy;сов его при&shy;ня&shy;то на&shy;зы&shy;вать <a id="org4e91f73"></a>domain, но раз&shy;ни&shy;цы ни&shy;ка&shy;кой нет)</li>
</ol>

<p>
Для фа&shy;йлов кон&shy;текст мож&shy;но по&shy;смот&shy;реть так:
</p>

<pre class="example">
# ls -dZ /
dr-xr-xr-x. root root system_u:object_r:root_t:s0      /
</pre>

<p>
Здесь:
</p>
<ul class="org-ul">
<li><code>system_u</code>: user</li>
<li><code>object_r</code>: role</li>
<li><code>s0</code>: type</li>
</ul>

<p>
Ана&shy;ло&shy;гич&shy;но, мож&shy;но по&shy;смот&shy;реть для про&shy;цес&shy;сов:
</p>

<pre class="example">
# ps auxwZ|head -2
LABEL                           USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
system_u:system_r:init_t:s0     root         1  0.0  0.3  19236  1572 ?        Ss   10:54   0:00 /sbin/init
</pre>

<p>
То, что у /sbin/init и у кор&shy;не&shy;вой ди&shy;рек&shy;то&shy;рии оди&shy;на&shy;ко&shy;вый кон&shy;текст ни о
чём не го&shy;во&shy;рит. Пра&shy;ва на до&shy;ступ к кор&shy;ню у init бу&shy;дут толь&shy;ко ес&shy;ли об
этом яв&shy;но ска&shy;за&shy;но в пра&shy;ви&shy;лах по&shy;ли&shy;ти&shy;ки.
</p>

<p>
Точ&shy;но так же мож&shy;но узнать кон&shy;текст те&shy;ку&shy;ще&shy;го шел&shy;ла:
</p>

<pre class="example">
# id -Z
unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
</pre>
</div>
</div>

<div id="outline-container-org8802fdb" class="outline-3">
<h3 id="org8802fdb">Аудит</h3>
<div class="outline-text-3" id="text-org8802fdb">
<p>
В ре&shy;жи&shy;мах enforcing и permissive си&shy;сте&shy;ма пи&shy;шет в лог
<code>/var/log/audit/audit.log</code> обо всех со&shy;бы&shy;ти&shy;ях безопа&shy;снос&shy;ти. Этот лог
по&shy;ле&shy;зен как при руч&shy;ном со&shy;зда&shy;нии пра&shy;вил, так и с по&shy;мощью audit2allow.
</p>

<p>
Если auditd не за&shy;пу&shy;щен, со&shy;об&shy;ще&shy;ния уй&shy;дут в <code>/var/log/messages</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-org45c79d8" class="outline-2">
<h2 id="org45c79d8">Соз&shy;да&shy;ние но&shy;вых пра&shy;вил</h2>
<div class="outline-text-2" id="text-org45c79d8">
<p>
Лучше все&shy;го это де&shy;лать че&shy;рез на&shy;пи&shy;са&shy;ние мо&shy;ду&shy;ля. Модуль SELinux мож&shy;но
под&shy;гр&shy;ужать, вы&shy;гру&shy;жать, рас&shy;прост&shy;ра&shy;нять. Удоб&shy;но.
</p>
</div>

<div id="outline-container-orgd989018" class="outline-3">
<h3 id="orgd989018">Общий план</h3>
<div class="outline-text-3" id="text-orgd989018">
<ul class="org-ul">
<li>Соз&shy;дать но&shy;вый type для за&shy;пус&shy;ка&shy;емо&shy;го фа&shy;йла</li>
<li>Соз&shy;дать но&shy;вый type, ко&shy;то&shy;рый бу&shy;дет domain ра&shy;бо&shy;та&shy;юще&shy;го при&shy;ло&shy;же&shy;ния</li>
<li>По умо&shy;лча&shy;нию у но&shy;во&shy;го до&shy;ме&shy;на нет ни&shy;ка&shy;ких прав. Поэ&shy;то&shy;му его мож&shy;но
за&shy;пус&shy;тить в permissive mode</li>
<li>С по&shy;мощью audit2allow со&shy;здать ша&shy;блон пра&shy;вил, от&shy;ре&shy;дак&shy;ти&shy;ро&shy;вать их.</li>
<li>Вклю&shy;чить ре&shy;жим enforcing.</li>
</ul>
</div>
</div>

<div id="outline-container-org40cd995" class="outline-3">
<h3 id="org40cd995">Соз&shy;да&shy;ние мо&shy;ду&shy;ля</h3>
<div class="outline-text-3" id="text-org40cd995">
</div>
<div id="outline-container-orgde92a22" class="outline-4">
<h4 id="orgde92a22">Подго&shy;то&shy;вка</h4>
<div class="outline-text-4" id="text-orgde92a22">
<div class="org-src-container">
<pre><code class="src src-sh">mkdir <span style="color: #8b2252;">"/root/selinux_my_module"</span>
<span style="color: #483d8b;">cd</span> <span style="color: #8b2252;">"/root/selinux_my_module"</span>
ln -s <span style="color: #8b2252;">"/usr/share/selinux/devel/Makefile"</span>
vim <span style="color: #8b2252;">"my_module.te"</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org8ea951e" class="outline-4">
<h4 id="org8ea951e">Соз&shy;да&shy;ние ми&shy;ни&shy;маль&shy;но&shy;го мо&shy;ду&shy;ля</h4>
<div class="outline-text-4" id="text-org8ea951e">
<div class="org-src-container">
<pre><code class="src src-c"><span style="color: #228b22;">module</span> <span style="color: #a0522d;">my_module</span> 1.0;

require {
  <span style="color: #228b22;">type</span> <span style="color: #a0522d;">unconfined_t</span>;
  <span style="color: #228b22;">class</span> <span style="color: #a0522d;">process</span> { <span style="color: #228b22;">transition</span> <span style="color: #a0522d;">sigchld</span> };
  <span style="color: #228b22;">class</span> <span style="color: #a0522d;">file</span> { <span style="color: #228b22;">read</span> <span style="color: #a0522d;">x_file_perms</span> };
}

<span style="color: #228b22;">type</span> <span style="color: #a0522d;">mytype_t</span>;
<span style="color: #228b22;">type</span> <span style="color: #a0522d;">mytype_exec_t</span>;

role unconfined_r <span style="color: #228b22;">types</span> <span style="color: #a0522d;">mytype_t</span>;

type_transition <span style="color: #228b22;">unconfined_t</span> <span style="color: #a0522d;">mytype_exec_t</span> : process mytype_t;
</code></pre>
</div>
</div>
</div>

<div id="outline-container-orgf1bb0f7" class="outline-4">
<h4 id="orgf1bb0f7">Сбор&shy;ка и за&shy;груз&shy;ка</h4>
<div class="outline-text-4" id="text-orgf1bb0f7">
<div class="org-src-container">
<pre><code class="src src-sh">make &amp;&amp; make load
</code></pre>
</div>

<p>
Заг&shy;ру&shy;зить за&shy;но&shy;во по&shy;сле пе&shy;рес&shy;бор&shy;ки:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">make &amp;&amp; make reload
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org87acbc3" class="outline-4">
<h4 id="org87acbc3">Про&shy;вер&shy;ка</h4>
<div class="outline-text-4" id="text-org87acbc3">
<div class="org-src-container">
<pre><code class="src src-sh">cp /bin/date /root/test
chcon -t mytype_exec_t /root/test
setenforce 1
/root/test 
</code></pre>
</div>

<p>
Сей&shy;час у би&shy;нар&shy;ни&shy;ка нет ни на что прав, по&shy;это&shy;му в по&shy;след&shy;ней строч&shy;ке
дол&shy;жны по&shy;лу&shy;чить <code>/root/test: Permission denied</code>.
</p>
</div>
</div>

<div id="outline-container-org5f3d271" class="outline-4">
<h4 id="org5f3d271">Добав&shy;ле&shy;ние пра&shy;вил с по&shy;мощью <a id="orgddafb88"></a>audit2allow</h4>
<div class="outline-text-4" id="text-org5f3d271">
<p>
Ути&shy;ли&shy;та пред&shy;на&shy;зна&shy;че&shy;на для ге&shy;не&shy;ра&shy;ции пра&shy;вил на ос&shy;но&shy;ве ло&shy;га <a href="#org8802fdb">ау&shy;ди&shy;та</a>.
</p>

<div class="org-src-container">
<pre><code class="src src-sh">grep mytype /var/log/audit/audit.log | audit2allow -m mytype &gt;my_module.te
</code></pre>
</div>

<p>
Теперь мож&shy;но по&shy;пра&shy;вить мо&shy;дуль, за&shy;тем за&shy;но&shy;во его <a href="#orgf1bb0f7">за&shy;гру&shy;зить</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-org5cfdbe2" class="outline-3">
<h3 id="org5cfdbe2">Полез&shy;ные пра&shy;ви&shy;ла</h3>
<div class="outline-text-3" id="text-org5cfdbe2">
</div>
<div id="outline-container-orgb502478" class="outline-4">
<h4 id="orgb502478">Воз&shy;мож&shy;ность ме&shy;нять type об&shy;рат&shy;но</h4>
<div class="outline-text-4" id="text-orgb502478">
<p>
По умо&shy;лча&shy;ни
</p>

<pre class="example">
...
require {
...
   class file { ... relabelfrom ... }
}

allow unconfined_t mytype_exec_t:file { ... relabelfrom ... }
</pre>
</div>
</div>

<div id="outline-container-orgb079001" class="outline-4">
<h4 id="orgb079001">Базо&shy;вые пра&shy;ви&shy;ла для за&shy;пус&shy;ка фа&shy;йла</h4>
<div class="outline-text-4" id="text-orgb079001">
<pre class="example">
# доступ к /
allow mytype_t root_t:dir search;

# разрешить unconfined_t запускать mytype_exec_t
allow unconfined_t mytype_exec_t:file { read getattr open execute };

# разрешить unconfined_t работу с процессом
allow unconfined_t mytype_t:process { siginh rlimitinh transition
noatsecure };

# разрешить unconfined_t менять контекст бинарника и переименовывать его
allow unconfined_t mytype_exec_t:file { rename relabelfrom relabelto };
allow mytype_exec_t fs_t:filesystem associate;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2f188c3" class="outline-3">
<h3 id="org2f188c3">При&shy;мер го&shy;то&shy;во&shy;го мо&shy;ду&shy;ля</h3>
<div class="outline-text-3" id="text-org2f188c3">
<p>
Разре&shy;шить би&shy;нар&shy;ни&shy;ку с type mytype_t до&shy;ступ толь&shy;ко к /tmp
</p>

<pre class="example">
module mytype 1.0;

require {
        type unconfined_t;
	type tmp_t;
	type root_t;
	type sshd_t;
	type mytype_t;
	type mytype_exec_t;
	class dir { getattr append read write lock create rename link rmdir open search };
	class file { read entrypoint getattr open execute rename relabelfrom relabelto };
	class process { siginh transition sigchld noatsecure rlimitinh };
	type user_devpts_t;
	class chr_file { open read write getattr append ioctl };
	class fd use;
	class filesystem associate;
}

#============= mytype_t ==============

# access to /
allow mytype_t root_t:dir search;

# access /tmp
allow mytype_t tmp_t:dir { getattr append read write lock create rename link rmdir open search };

# allow general context to run me
allow unconfined_t mytype_exec_t:file { read getattr open execute };

# allow general context to work with my process
allow unconfined_t mytype_t:process { siginh rlimitinh transition noatsecure };

# allow me to write to charcter device
allow mytype_t user_devpts_t:chr_file { read write getattr append ioctl };

# allow general context to switch into my context
type_transition unconfined_t mytype_exec_t : process mytype_t;
allow mytype_t mytype_exec_t:file entrypoint;

# allow me to send SIGCHLD to parent
allow mytype_t unconfined_t:process sigchld;

# allow general context to change to/from my context
allow unconfined_t mytype_exec_t:file { rename relabelfrom relabelto };


## access to pty in SSH session ##
allow mytype_t sshd_t:fd use;
</pre>

<p>
При&shy;мер би&shy;нар&shy;ни&shy;ка для тес&shy;тов:
</p>

<div class="org-src-container">
<pre><code class="src src-c"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;dirent.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;errno.h&gt;</span>

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">ls</span> (<span style="color: #228b22;">char</span> *<span style="color: #a0522d;">dir</span>) {
  printf(<span style="color: #8b2252;">"\nNow will list %s\n"</span>, dir);

  <span style="color: #228b22;">DIR</span> *<span style="color: #a0522d;">dirp</span> = opendir(dir);
  <span style="color: #a020f0;">if</span> (<span style="color: #008b8b;">NULL</span> == dirp) {
    printf(<span style="color: #8b2252;">"Error opening dir %i\n"</span>, errno);
  }

  <span style="color: #a020f0;">struct</span> <span style="color: #228b22;">dirent</span> *<span style="color: #a0522d;">dp</span>;
  errno = 0;
  <span style="color: #a020f0;">while</span> (dirp) {
    <span style="color: #a020f0;">if</span> ((dp = readdir(dirp)) != <span style="color: #008b8b;">NULL</span>) {
      printf(<span style="color: #8b2252;">"%s\n"</span>, dp-&gt;d_name);
    } <span style="color: #a020f0;">else</span> {
      <span style="color: #a020f0;">if</span> (errno) {
        printf(<span style="color: #8b2252;">"Error readding dir %i\n"</span>, errno);
      }
      <span style="color: #a020f0;">if</span> (closedir(dirp)) {
        printf(<span style="color: #8b2252;">"Error closing dir %i\n"</span>, errno);
      }
      <span style="color: #a020f0;">return</span>;
    }
  }
  <span style="color: #a020f0;">return</span>;
}

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span>() {
  ls (<span style="color: #8b2252;">"/tmp"</span>);
  ls (<span style="color: #8b2252;">"/etc"</span>);

  <span style="color: #a020f0;">return</span> 0;
}
</code></pre>
</div>

<p>
Соб&shy;ирать ко&shy;неч&shy;но на&shy;до ста&shy;ти&shy;ком:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">gcc -static a.c
</code></pre>
</div>

<p>
После это&shy;го не за&shy;быть по&shy;ме&shy;нять context:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">mv a.out /tmp
chcon -t mytype_t /tmp/a.out
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org12ee350" class="outline-3">
<h3 id="org12ee350">Пра&shy;ви&shy;ло для policy "minimum"</h3>
<div class="outline-text-3" id="text-org12ee350">
<p>
Если уста&shy;нов&shy;лен minimum, то не&shy;об&shy;хо&shy;ди&shy;мо всем поль&shy;зо&shy;ва&shy;те&shy;лям ро&shy;ли
unconfined_r (а это в по&shy;ли&shy;ти&shy;ке minumum все поль&shy;зо&shy;ва&shy;те&shy;ли) до&shy;ступ к <a href="#org3bd1d38">ти&shy;пу</a> mytype_t.
</p>

<pre class="example">
role unconfined_r types mytype_t;
</pre>
</div>
</div>
</div>

<div id="outline-container-org037a18c" class="outline-2">
<h2 id="org037a18c">Огра&shy;ни&shy;че&shy;ние толь&shy;ко од&shy;но&shy;го би&shy;нар&shy;ни&shy;ка</h2>
<div class="outline-text-2" id="text-org037a18c">
<ol class="org-ol">
<li>Поста&shy;вить па&shy;кет <code>selinux-policy-minimum</code> (CentOS)</li>
<li>Про&shy;пи&shy;сать этот policy в <code>/etc/selinux/config</code></li>
<li>reboot (мо&shy;жет быть дол&shy;гим ес&shy;ли на&shy;чнет&shy;ся relabeling)</li>
<li>Соз&shy;дать <a href="#org8ea951e">мо&shy;дуль</a>, не за&shy;быть про <a href="#org12ee350">Пра&shy;ви&shy;ло для policy "minimum"</a></li>
</ol>
</div>
</div>

<div id="outline-container-org3fc829a" class="outline-2">
<h2 id="org3fc829a">Про&shy;чее</h2>
<div class="outline-text-2" id="text-org3fc829a">
</div>
<div id="outline-container-orgdc5b213" class="outline-3">
<h3 id="orgdc5b213">Рас&shy;прост&shy;ра&shy;не&shy;ние с мо&shy;ду&shy;лем кон&shy;текс&shy;тов фа&shy;йлов</h3>
<div class="outline-text-3" id="text-orgdc5b213">
<p>
В ди&shy;рек&shy;то&shy;рии с мо&shy;ду&shy;лем до&shy;ста&shy;точ&shy;но со&shy;здать файл ви&shy;да:
</p>

<pre class="example">
/usr/lib64/libmagic.* --      system_u:object_r:image_magick_lib_t:s0
...
...
</pre>

<p>
Он точ&shy;но так же со&shy;бе&shy;рет&shy;ся и бу&shy;дет уста&shy;нов&shy;лен с по&shy;мощью <code>make &amp;&amp; make reload</code>
</p>
</div>
</div>

<div id="outline-container-org2a74b1f" class="outline-3">
<h3 id="org2a74b1f">Обно&shy;вле&shy;ние кон&shy;текс&shy;тов фа&shy;йлов со&shy;глас&shy;но за&shy;гру&shy;жен&shy;ным пра&shy;ви&shy;лам</h3>
<div class="outline-text-3" id="text-org2a74b1f">
<p>
Про&shy;ве&shy;рить что и как бу&shy;дет об&shy;но&shy;вле&shy;но:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">fixfiles check /usr/lib64/
</code></pre>
</div>

<p>
Обно&shy;вить:
</p>

<div class="org-src-container">
<pre><code class="src src-sh">fixfiles relabel /usr/lib64/
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org40e2f74" class="outline-2">
<h2 id="org40e2f74">Полез&shy;ные ссыл&shy;ки</h2>
<div class="outline-text-2" id="text-org40e2f74">
<ul class="org-ul">
<li><a href="http://fedoraproject.org/wiki/PackagingDrafts/SELinux#Creating_new_types">Creating new types</a></li>
<li><a href="https://selinuxproject.org/page/ObjectClassesPerms">ObjectClassesPerms</a></li>
<li><a href="https://habrahabr.ru/post/332886/">Тем&shy;ные мо&shy;мен&shy;ты SELinux</a></li>
</ul>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="Дата создания" class="post-info">2017-10-03</span>
        <span title="Дата последнего изменения" class="post-info">2017-11-10</span>
        <span title="Автор" class="post-info">Evgenii Lepikhin</span>
      </div>
      <span title="Тэги" class="post-info">Тэги: <a href="/tags/selinux/">SELinux</a>, <a href="/tags/безопасность/">безопасность</a>, <a href="/tags/linux/">linux</a>, <a href="/tags/администрирование/">администрирование</a></span>
      <section>
        <h1>Комментарии (выключены)</h1>
      </section>
      <script src="//code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107728320-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-107728320-1');
        </script>
      <div class="footer">
        <p>
          Copyleft 2017 - ∞ <a href="mailto:e &lt;dot&gt; lepikhin &lt;at&gt; corp &lt;dot&gt; mail &lt;dot&gt; ru">Evgenii Lepikhin</a> (<a href="https://github.com/johnlepikhin">GitHub</a>)
        </p>
      </div>
    </div>

  </body>
</html>
